<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<title>Admin</title>
<%- include('../partials/head'); %>
<!-- Custom styles for this template-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
<link href="/css/sb-admin-2.min.css" rel="stylesheet">


<script>
  $(document).ready(function(){

});

  var total=0;
</script>
</head>
<body class="container-fluid">

<header>
  <%- include('../partials/adminheader'); %>



</header>

<div class="jumbotron">
  <main role="main">

    <section class="jumbotron text-center">
      <div class="container">
        <h1 class="jumbotron-heading">Manage flood posts</h1>
      </div>
    </section>


    

    <div class="album py-5 bg-light">
      <div class="container">

        <div class="row">
          <div class="row float-right mb-4">
            <div class="col-auto ms-auto float-right">
              <a href="/posts/admin/manageposts/createblogpost">
                <button  class="btn btn-primary btn-sm float-right">
                  <i class="fa fa-plus" aria-hidden="true"></i>
                  Create a new post
                  </button>
              </a>
            
              </div>
          </div>
          <% posts.forEach(function(post) { %>
           

            <div class="col-md-4">
              <div class="card mb-4 box-shadow">
                <img class="card img-hover-zoom--quick-zoom" data-src="" alt="" style="height: 225px; width: 100%; display: block;" src="/uploads/blogimages/<%=post.image1%>" data-holder-rendered="true">
                <div class="card-body">
                  <p class="card-text"><%=post.title.substring(0,15) %></p>
                  <div class="d-flex justify-content-between align-items-center">
                    <div class="btn-group">
                      <a href="/posts/viewnewspost/<%= post._id%>"><button type="button" class="btn btn-sm btn-outline-primary">View</button>
                      </a>
                      <a style="margin-left: 5px;" href="/posts/admin/manageposts/edit/<%= post._id%>"><button type="button" class="btn btn-sm btn-outline-secondary">Edit</button></a>    
                      <a style="margin-left: 5px;" href="/posts/admin/manageposts/delete/<%= post._id%>" ><button type="button" class="btn btn-sm btn-outline-danger">Delete</button></a>        
    
                    </div>
                    <%
                    const date = new Date(post.postedAt);
                    const now = new Date();
                  
                    const timeDiffMs = now - date;
                    const timeDiffMinutes = Math.round(timeDiffMs / 1000 / 60);
                  
                    let timeAgo;
                  
                    if (timeDiffMinutes < 60) {
                      timeAgo = `${timeDiffMinutes} ${timeDiffMinutes === 1 ? 'minute' : 'minutes'} ago`;
                    } else if (timeDiffMinutes < 24 * 60) {
                      const timeDiffHours = Math.round(timeDiffMinutes / 60);
                      timeAgo = `${timeDiffHours} ${timeDiffHours === 1 ? 'hour' : 'hours'} ago`;
                    } else {
                      const timeDiffDays = Math.round(timeDiffMinutes / 60 / 24);
                      timeAgo = `${timeDiffDays} ${timeDiffDays === 1 ? 'day' : 'days'} ago`;
                    }
                  %>
                    <small class="text-muted"><%=timeAgo%></small>
                  </div>
                </div>
              </div>
            </div>
         
           
          <% }); %>
  
        </div>
      </div>
    </div>

  </main>

</div>




</body>


</html>